<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Django5+Vue3:OAç³»ç»Ÿå‰åç«¯åˆ†ç¦»é¡¹ç›®å®æˆ˜-è·¨åŸŸè¯·æ±‚é…ç½®(2)</title>
    <url>/2024/08/06/Django5-Vue3-OA%E7%B3%BB%E7%BB%9F%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E9%85%8D%E7%BD%AE-2/</url>
    <content><![CDATA[<h1 id="Django5-Vue3-ç³»åˆ—æ–‡ç« "><a href="#Django5-Vue3-ç³»åˆ—æ–‡ç« " class="headerlink" title="Django5+Vue3 ç³»åˆ—æ–‡ç« "></a>Django5+Vue3 ç³»åˆ—æ–‡ç« </h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote>
<p>æ­¤é¡¹ç›®é‡‡ç”¨ Django æ¡†æ¶çš„ 5.0.7 ç‰ˆæœ¬è¿›è¡Œå¼€å‘ã€‚<br>Django 5.0 æ”¯æŒçš„ Python ç‰ˆæœ¬ä¸º 3.10ã€3.11 å’Œ 3.12ã€‚<br>OA ç³»ç»Ÿç³»åˆ—æ–‡ç« å°†æŒç»­æ›´æ–°ï¼Œç›´è‡³é¡¹ç›®çš„ Docker éƒ¨ç½²é˜¶æ®µã€‚<br>CSDN ä¸“æ é“¾æ¥:Â <a href="http://t.csdnimg.cn/oMuU0">~å¿«æ·ä¼ é€é—¨: ç•™ä¸ªèµå†èµ°å‘— ğŸ˜­! ~</a></p>
</blockquote>
<h2 id="å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­çš„è·¨åŸŸè¯·æ±‚é—®é¢˜"><a href="#å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­çš„è·¨åŸŸè¯·æ±‚é—®é¢˜" class="headerlink" title="å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­çš„è·¨åŸŸè¯·æ±‚é—®é¢˜"></a>å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­çš„è·¨åŸŸè¯·æ±‚é—®é¢˜</h2><p>æœ¬é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œå‰ç«¯ä¸åç«¯éƒ¨ç½²åœ¨ä¸åŒç«¯å£ï¼Œå¯¼è‡´å®ƒä»¬è¿è¡Œåœ¨ä¸åŒçš„åŸŸåä¸‹ã€‚ä¾‹å¦‚ï¼Œå‰ç«¯é¡µé¢é€šè¿‡<code>http://127.0.0.1:5173</code>è®¿é—®ï¼Œè€Œåç«¯æœåŠ¡ä½äº<code>http://127.0.0.1:8000</code>ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå‰ç«¯å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®æ—¶ä¼šè§¦å‘è·¨åŸŸè¯·æ±‚ã€‚<br>è·¨åŸŸè¯·æ±‚çš„æˆåŠŸä¸å¦å–å†³äºæœåŠ¡ç«¯è®¾ç½®ï¼Œåªæœ‰æœåŠ¡ç«¯æ˜ç¡®å…è®¸ï¼Œå‰ç«¯æ‰èƒ½æˆåŠŸè®¿é—®æ•°æ®ã€‚<br>ç®€è€Œè¨€ä¹‹ï¼Œå‰ç«¯ä¸åç«¯çš„äº¤äº’éœ€è¦æœåŠ¡ç«¯çš„è·¨åŸŸé…ç½®æ”¯æŒã€‚</p>
<h2 id="è·¨åŸŸè¯·æ±‚é…ç½®"><a href="#è·¨åŸŸè¯·æ±‚é…ç½®" class="headerlink" title="è·¨åŸŸè¯·æ±‚é…ç½®"></a>è·¨åŸŸè¯·æ±‚é…ç½®</h2><h3 id="ä¸‹è½½è·¨åŸŸè¯·æ±‚å·¥å…·"><a href="#ä¸‹è½½è·¨åŸŸè¯·æ±‚å·¥å…·" class="headerlink" title="ä¸‹è½½è·¨åŸŸè¯·æ±‚å·¥å…·"></a>ä¸‹è½½è·¨åŸŸè¯·æ±‚å·¥å…·</h3><p><a href="https://pypi.org/project/django-cors-headers/">django-cors-headers</a> : Django çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œç”¨äºå¤„ç†è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰é—®é¢˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install django-cors-headers</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2024/08/06/GC5BKDebfp7iJnl.png" alt="image"><br><strong>Successfuly installdjango-cors-headers-4.4.0: ä¸‹è½½æˆåŠŸ</strong></p>
<p><img src="https://s2.loli.net/2024/08/06/AOHwDdgUeKXV8rJ.png" alt="image"></p>
<h3 id="settings-é…ç½®è·¨åŸŸè¯·æ±‚åº”ç”¨"><a href="#settings-é…ç½®è·¨åŸŸè¯·æ±‚åº”ç”¨" class="headerlink" title="settings é…ç½®è·¨åŸŸè¯·æ±‚åº”ç”¨"></a>settings é…ç½®è·¨åŸŸè¯·æ±‚åº”ç”¨</h3><h4 id="django-cors-headers-å®‰è£…"><a href="#django-cors-headers-å®‰è£…" class="headerlink" title="django-cors-headers å®‰è£…"></a>django-cors-headers å®‰è£…</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Application definition</span></span><br><span class="line"></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&quot;django.contrib.admin&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.auth&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.contenttypes&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.sessions&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.messages&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.staticfiles&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®‰è£…rest_framework</span></span><br><span class="line">    <span class="string">&#x27;rest_framework&#x27;</span>,</span><br><span class="line">    <span class="comment"># å®‰è£…django-cors-headers</span></span><br><span class="line">    <span class="string">&#x27;corsheaders&#x27;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="ä¸­é—´ä»¶é…ç½®"><a href="#ä¸­é—´ä»¶é…ç½®" class="headerlink" title="ä¸­é—´ä»¶é…ç½®"></a>ä¸­é—´ä»¶é…ç½®</h4><blockquote>
<p><strong>Tips:</strong> CorsMiddleware åº”è¯¥æ”¾åœ¨å°½å¯èƒ½ä¼˜å…ˆçš„ä½ç½®ï¼Œç‰¹åˆ«æ˜¯åœ¨ä»»ä½•å¯ä»¥äº§ç”Ÿå“åº”çš„ä¸­é—´ä»¶ä¹‹å‰ï¼Œæ¯”å¦‚ Django çš„ CommonMiddleware æˆ– Whitenoise çš„ WhiteNoiseMiddlewareã€‚å¦‚æœä¸åœ¨æ­¤ä¹‹å‰è®¾ç½®ï¼Œå°±æ— æ³•åœ¨è¿™äº›å“åº”ä¸­æ·»åŠ  CORS å¤´ä¿¡æ¯ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">â€‹â€‹â€‹MIDDLEWARE = [</span><br><span class="line">    <span class="string">&quot;django.middleware.security.SecurityMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.sessions.middleware.SessionMiddleware&quot;</span>,</span><br><span class="line">    <span class="comment"># ä¸­é—´ä»¶æŒ‰é¡ºåºæ‰§è¡Œ,ä¸€å®šè¦åœ¨CommonMiddlewareå‰é¢,å¦åˆ™ä¼šå‡ºç°è·¨åŸŸè¯·æ±‚å¤±è´¥çš„é—®é¢˜</span></span><br><span class="line">    <span class="string">&quot;corsheaders.middleware.CorsMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.middleware.common.CommonMiddleware&quot;</span>,</span><br><span class="line">    <span class="comment"># å…³é—­CSRFä¿æŠ¤</span></span><br><span class="line">    <span class="comment"># &quot;django.middleware.csrf.CsrfViewMiddleware&quot;,</span></span><br><span class="line">    <span class="string">&quot;django.contrib.auth.middleware.AuthenticationMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.messages.middleware.MessageMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.middleware.clickjacking.XFrameOptionsMiddleware&quot;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="è·¨åŸŸè®¿é—®æƒé™é…ç½®"><a href="#è·¨åŸŸè®¿é—®æƒé™é…ç½®" class="headerlink" title="è·¨åŸŸè®¿é—®æƒé™é…ç½®"></a>è·¨åŸŸè®¿é—®æƒé™é…ç½®</h4><blockquote>
<p><strong>Tips:</strong> å¼€å‘é˜¶æ®µå‡ ä¹ä¸å­˜åœ¨å®‰å…¨é—®é¢˜,è®¾ç½®ä¸º True ä¾¿äºåç»­å¼€å‘</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">â€‹â€‹<span class="comment"># å…è®¸æ‰€æœ‰åŸŸåè·¨åŸŸè®¿é—®(æ‰‹åŠ¨æ·»åŠ è‡³settings.pyæ–‡ä»¶ä¸­)</span></span><br><span class="line">CORS_ALLOW_ALL_ORIGINS = <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬èŠ‚è¯¦ç»†ä»‹ç»äº†åœ¨ Django å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„è·¨åŸŸè¯·æ±‚é—®é¢˜ï¼Œå¹¶å±•ç¤ºäº†ç›¸åº”çš„è§£å†³æ–¹æ¡ˆå’Œé…ç½®æ–¹æ³•ã€‚æ›´å¤šè·¨åŸŸè¯¦æƒ…è¯·è®¿é—®å®˜æ–¹æ–‡æ¡£è‡ªè¡Œé˜…è¯» â€“&gt; <a href="https://pypi.org/project/django-cors-headers/">django-cors-headers å®˜æ–¹æ–‡æ¡£ä¼ é€é—¨</a></p>
]]></content>
      <categories>
        <category>å‰åç«¯åˆ†ç¦»</category>
      </categories>
      <tags>
        <tag>Django</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Django5+Vue3:OAç³»ç»Ÿå‰åç«¯åˆ†ç¦»é¡¹ç›®å®æˆ˜-ä¿®æ”¹OAUseræ¨¡å‹ä¸»é”®(4)</title>
    <url>/2024/08/07/Django5-Vue3-OA%E7%B3%BB%E7%BB%9F%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E4%BF%AE%E6%94%B9OAUser%E6%A8%A1%E5%9E%8B%E4%B8%BB%E9%94%AE-4/</url>
    <content><![CDATA[<h1 id="Django5-Vue3-ç³»åˆ—æ–‡ç« "><a href="#Django5-Vue3-ç³»åˆ—æ–‡ç« " class="headerlink" title="Django5+Vue3 ç³»åˆ—æ–‡ç« "></a>Django5+Vue3 ç³»åˆ—æ–‡ç« </h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote>
<p>æ­¤é¡¹ç›®é‡‡ç”¨ Django æ¡†æ¶çš„ 5.0.7 ç‰ˆæœ¬è¿›è¡Œå¼€å‘ã€‚<br>Django 5.0 æ”¯æŒçš„ Python ç‰ˆæœ¬ä¸º 3.10ã€3.11 å’Œ 3.12ã€‚<br>OA ç³»ç»Ÿç³»åˆ—æ–‡ç« å°†æŒç»­æ›´æ–°ï¼Œç›´è‡³é¡¹ç›®çš„ Docker éƒ¨ç½²é˜¶æ®µã€‚<br>CSDN ä¸“æ é“¾æ¥:Â <a href="http://t.csdnimg.cn/oMuU0">~å¿«æ·ä¼ é€é—¨: ç•™ä¸ªèµå†èµ°å‘— ğŸ˜­! ~</a></p>
</blockquote>
<h2 id="uuid"><a href="#uuid" class="headerlink" title="uuid"></a>uuid</h2><h3 id="shortuuid"><a href="#shortuuid" class="headerlink" title="shortuuid"></a><a href="https://pypi.org/project/shortuuid/">shortuuid</a></h3><blockquote>
<p>ä½¿ç”¨ shortuuid å¯ä»¥ç”ŸæˆçŸ­å°ã€å”¯ä¸€ã€éšæœºçš„æ ‡è¯†ç¬¦ï¼Œä¸ºæ•°æ®åº“æä¾›è·¨å¹³å°å…¼å®¹æ€§ã€å¢å¼ºéšç§æ€§ã€å‡å°‘å­˜å‚¨ç©ºé—´å’Œé¿å… ID å†²çªç­‰ä¼˜åŠ¿ï¼Œæ¯”é»˜è®¤ç”Ÿæˆçš„è‡ªåŠ¨å¢é•¿çš„ id æ›´å…·æœ‰å®‰å…¨æ€§ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install shortuuid</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2024/08/07/IBsHu3wcfhrEd8b.png"></p>
<h3 id="django-shortuuidfield"><a href="#django-shortuuidfield" class="headerlink" title="django-shortuuidfield"></a><a href="https://pypi.org/project/django-shortuuidfield/">django-shortuuidfield</a></h3><blockquote>
<p>django-shortuuidfield æ˜¯ä¸€ä¸ª Django åº”ç”¨ç¨‹åºï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç”¨äº Django æ¨¡å‹çš„ ShortUUIDField å­—æ®µï¼Œè¯¥å­—æ®µä½¿ç”¨ shortuuid åº“æ¥ç”ŸæˆçŸ­å°ä¸”å”¯ä¸€çš„ UUIDã€‚<br>Tips:æ­¤é¡¹ç›®ä½¿ç”¨ django-shortuuidfieldï¼Œå·²åŒ…å« uuid åº“æ— éœ€å•&gt;ç‹¬ä¸‹è½½ shortuuidã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install django-shortuuidfield</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2024/08/07/fLZ1B5qjAOtvRrh.png"></p>
<h2 id="é…ç½®-ShortUUIDField"><a href="#é…ç½®-ShortUUIDField" class="headerlink" title="é…ç½® ShortUUIDField"></a>é…ç½® ShortUUIDField</h2><h3 id="ä»-shortuuidfield-ä¸­å¯¼å…¥-ShortUUIDField"><a href="#ä»-shortuuidfield-ä¸­å¯¼å…¥-ShortUUIDField" class="headerlink" title="ä» shortuuidfield ä¸­å¯¼å…¥ ShortUUIDField"></a>ä» shortuuidfield ä¸­å¯¼å…¥ ShortUUIDField</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> shortuuidfield <span class="keyword">import</span> ShortUUIDField</span><br></pre></td></tr></table></figure>

<h3 id="æ·»åŠ è‡³-OAUser-æ¨¡å‹"><a href="#æ·»åŠ è‡³-OAUser-æ¨¡å‹" class="headerlink" title="æ·»åŠ è‡³ OAUser æ¨¡å‹"></a>æ·»åŠ è‡³ OAUser æ¨¡å‹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">uid = ShortUUIDField(primary_key=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<h2 id="é‡å»ºæ•°æ®åº“"><a href="#é‡å»ºæ•°æ®åº“" class="headerlink" title="é‡å»ºæ•°æ®åº“"></a>é‡å»ºæ•°æ®åº“</h2><blockquote>
<p>ç”±äºä¸»é”®çš„æ›´æ”¹ä¼šå¯¹æ•°æ®åº“ç»“æ„äº§ç”Ÿé‡å¤§å½±å“ï¼Œç›´æ¥è¿›è¡Œè¿ç§»å¯èƒ½ä¼šå¯¼è‡´ä¾èµ–äº User è¡¨çš„å…¶ä»–è¡¨å‡ºç°æ•…éšœã€‚å› æ­¤ï¼Œéœ€è¦å…ˆåˆ é™¤æ‰€æœ‰å¼•ç”¨äº† User è¡¨çš„è¡¨ï¼Œç„¶åå†é‡æ–°ç”Ÿæˆè¿™äº›è¡¨ä»¥ç¡®ä¿æ•°æ®åº“çš„ä¸€è‡´æ€§å’ŒåŠŸèƒ½çš„å®Œæ•´æ€§ã€‚</p>
</blockquote>
<h3 id="MySQL-é‡å»ºæ•°æ®åº“-oa"><a href="#MySQL-é‡å»ºæ•°æ®åº“-oa" class="headerlink" title="MySQL é‡å»ºæ•°æ®åº“ oa"></a>MySQL é‡å»ºæ•°æ®åº“ oa</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE IF <span class="keyword">EXISTS</span> oa;</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE oa <span class="keyword">DEFAULT</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4;</span><br></pre></td></tr></table></figure>

<h3 id="åˆ é™¤æ®‹ç•™è¿ç§»æ–‡ä»¶"><a href="#åˆ é™¤æ®‹ç•™è¿ç§»æ–‡ä»¶" class="headerlink" title="åˆ é™¤æ®‹ç•™è¿ç§»æ–‡ä»¶"></a>åˆ é™¤æ®‹ç•™è¿ç§»æ–‡ä»¶</h3><p>è¿ç§»æ–‡ä»¶ä½äº: appsâ€“&gt;oaauthâ€“&gt;migrationsâ€“&gt;0001_initial.py<br><img src="https://s2.loli.net/2024/08/07/2FWNKqiZvfQX7lY.png"></p>
<h2 id="æ¨¡å‹æ˜ å°„"><a href="#æ¨¡å‹æ˜ å°„" class="headerlink" title="æ¨¡å‹æ˜ å°„"></a>æ¨¡å‹æ˜ å°„</h2><p><em>ç»ˆç«¯ä¾æ¬¡æ‰§è¡Œå¦‚ä¸‹ï¼ˆç¤ºä¾‹ï¼‰ï¼š</em></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>

<p><em>æ£€æŸ¥æ•°æ®åº“ï¼ˆç¤ºä¾‹ï¼‰ï¼š</em><br><img src="https://s2.loli.net/2024/08/07/a4DPKuHkA6gphOz.png"></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬èŠ‚ä»‹ç»äº†é€šè¿‡å®‰è£… django-shortuuidfieldï¼Œå®ç°æ•°æ®åº“çš„é‡æ–°åˆå§‹åŒ–å’Œæ¨¡å‹è¿ç§»ï¼Œä»¥ UUID å¢å¼ºå®é™…æƒ…å†µä¸‹ä¼ä¸šçš„ä¿¡æ¯å®‰å…¨ã€‚</p>
]]></content>
      <categories>
        <category>å‰åç«¯åˆ†ç¦»</category>
      </categories>
      <tags>
        <tag>Django</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Django5+Vue3:OAç³»ç»Ÿå‰åç«¯åˆ†ç¦»é¡¹ç›®å®æˆ˜-é‡å†™Useræ¨¡å‹(3)</title>
    <url>/2024/08/07/Django5-Vue3-OA%E7%B3%BB%E7%BB%9F%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E9%87%8D%E5%86%99User%E6%A8%A1%E5%9E%8B-3/</url>
    <content><![CDATA[<h1 id="Django5-Vue3-ç³»åˆ—æ–‡ç« "><a href="#Django5-Vue3-ç³»åˆ—æ–‡ç« " class="headerlink" title="Django5+Vue3 ç³»åˆ—æ–‡ç« "></a>Django5+Vue3 ç³»åˆ—æ–‡ç« </h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote>
<p>æ­¤é¡¹ç›®é‡‡ç”¨ Django æ¡†æ¶çš„ 5.0.7 ç‰ˆæœ¬è¿›è¡Œå¼€å‘ã€‚<br>Django 5.0 æ”¯æŒçš„ Python ç‰ˆæœ¬ä¸º 3.10ã€3.11 å’Œ 3.12ã€‚<br>OA ç³»ç»Ÿç³»åˆ—æ–‡ç« å°†æŒç»­æ›´æ–°ï¼Œç›´è‡³é¡¹ç›®çš„ Docker éƒ¨ç½²é˜¶æ®µã€‚<br>CSDN ä¸“æ é“¾æ¥:Â <a href="http://t.csdnimg.cn/oMuU0">~å¿«æ·ä¼ é€é—¨: ç•™ä¸ªèµå†èµ°å‘— ğŸ˜­! ~</a></p>
</blockquote>
<h2 id="å›½å†…å¤–-User-æ¨¡å‹çš„å·®å¼‚"><a href="#å›½å†…å¤–-User-æ¨¡å‹çš„å·®å¼‚" class="headerlink" title="å›½å†…å¤– User æ¨¡å‹çš„å·®å¼‚"></a>å›½å†…å¤– User æ¨¡å‹çš„å·®å¼‚</h2><p>å°½ç®¡ Django çš„ User æ¨¡å‹è®¾è®¡æˆç†Ÿï¼Œä½†ç”±äºå›½å†…å¤–ä½¿ç”¨ç¯å¢ƒå·®å¼‚ï¼Œå­˜åœ¨ä¸€äº›ä¸é€‚ç”¨å’Œç¼ºå¤±çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ç¼ºå°‘å¯¹æ‰‹æœºå·çš„æ”¯æŒï¼Œä»¥åŠå›½å¤–å§“ååˆ†ä¸º first_name å’Œ last_nameã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸ç›´æ¥æ›¿æ¢åŸæœ‰çš„ User æ¨¡å‹ï¼Œè€Œæ˜¯é€‰æ‹©æ‰©å±•å®ƒã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ User æ¨¡å‹ä»¥é€‚åº”å›½å†…ç¯å¢ƒï¼ŒåŒæ—¶ä¿ç•™ Django å¼ºå¤§çš„å†…å»ºè®¤è¯ç³»ç»ŸåŠŸèƒ½ã€‚é€šè¿‡é‡å†™ User å¯¹è±¡ï¼Œæˆ‘ä»¬å®ç°äº†æ¨¡å‹çš„æœ¬åœ°åŒ–å®šåˆ¶ï¼Œç¡®ä¿äº†åŠŸèƒ½çš„å®Œæ•´æ€§å’Œæ‰©å±•æ€§ã€‚</p>
<h2 id="é‡å†™-User-æ¨¡å‹"><a href="#é‡å†™-User-æ¨¡å‹" class="headerlink" title="é‡å†™ User æ¨¡å‹"></a>é‡å†™ User æ¨¡å‹</h2><h3 id="ç»ˆç«¯åˆ›å»º-django-åº”ç”¨"><a href="#ç»ˆç«¯åˆ›å»º-django-åº”ç”¨" class="headerlink" title="ç»ˆç«¯åˆ›å»º django åº”ç”¨"></a>ç»ˆç«¯åˆ›å»º django åº”ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python manage.py startapp oaauth</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå‡ºç°å¦‚ä¸‹åˆ›å»ºå¤±è´¥ï¼Œè¯·è‡ªè¡Œé€‰æ‹© MySQL æ•°æ®åº“é©±åŠ¨ç¨‹åº:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module.</span><br><span class="line">Did you install mysqlclient?</span><br></pre></td></tr></table></figure>

<p>ä»æ€§èƒ½ä¸Šæ¨è mysqlclientï¼Œä»æ“ä½œç®€æ˜“æ€§æ¨èä½¿ç”¨ pymysqlï¼Œæ­¤å¤„ä½¿ç”¨ pymysql ç¤ºä¾‹ï¼ˆç»ˆç«¯ä¸‹è½½ pymysqlï¼‰:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install pymysql</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¯·è‡ªè¡Œæ‰‹åŠ¨æ·»åŠ åˆ°é¡¹ç›®æ ¹ç›®å½•çš„__init__.pyæ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ­¤æ—¶å†æ¬¡è¿è¡Œ python manage.py startapp oaauthï¼Œåˆ™åä¸º oaauth çš„åº”ç”¨åˆ›å»ºæˆåŠŸ</p>
</blockquote>
<h3 id="åˆ›å»º-apps-ç®¡ç†åŒ…"><a href="#åˆ›å»º-apps-ç®¡ç†åŒ…" class="headerlink" title="åˆ›å»º apps ç®¡ç†åŒ…"></a>åˆ›å»º apps ç®¡ç†åŒ…</h3><blockquote>
<p>å› ä¸ºé¡¹ç›®ä¼šåˆ›å»ºä¼—å¤š app åº”ç”¨ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†åœ¨æ­¤åˆ›å»ºä¸€ä¸ªåä¸º apps çš„è½¯ä»¶åŒ…è¿›è¡Œç»Ÿä¸€ç®¡ç†</p>
</blockquote>
<p>Tips: åˆ›å»ºå®Œæˆåéœ€å°† oaauth åº”ç”¨æ–‡ä»¶å¤¹æ”¾è¿› oaauth æ–‡ä»¶å¤¹ä¸­ï¼Œå¦‚ä¸‹:</p>
<p><img src="https://s2.loli.net/2024/08/07/2HsQ18kSwvgeTm7.png"></p>
<p><img src="https://s2.loli.net/2024/08/07/aDZPN1Gj2zQSp4l.png"></p>
<h3 id="settings-å®‰è£…-oaauth-åº”ç”¨"><a href="#settings-å®‰è£…-oaauth-åº”ç”¨" class="headerlink" title="settings å®‰è£… oaauth åº”ç”¨"></a>settings å®‰è£… oaauth åº”ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Application definition</span></span><br><span class="line"></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&quot;django.contrib.admin&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.auth&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.contenttypes&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.sessions&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.messages&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.staticfiles&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®‰è£…rest_framework</span></span><br><span class="line">    <span class="string">&#x27;rest_framework&#x27;</span>,</span><br><span class="line">    <span class="comment"># å®‰è£…django-cors-headers</span></span><br><span class="line">    <span class="string">&#x27;corsheaders&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;apps.oaauth&#x27;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="é‡å†™-User-æ¨¡å‹-1"><a href="#é‡å†™-User-æ¨¡å‹-1" class="headerlink" title="é‡å†™ User æ¨¡å‹"></a>é‡å†™ User æ¨¡å‹</h3><blockquote>
<p>æ‰“å¼€ apps â€“&gt; oaauth â€“&gt;models.py æ–‡ä»¶</p>
</blockquote>
<h4 id="å¯¼å…¥-User-æ¨¡å‹"><a href="#å¯¼å…¥-User-æ¨¡å‹" class="headerlink" title="å¯¼å…¥ User æ¨¡å‹"></a>å¯¼å…¥ User æ¨¡å‹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> User</span><br></pre></td></tr></table></figure>

<h4 id="å¤åˆ¶-User-æ¨¡å‹"><a href="#å¤åˆ¶-User-æ¨¡å‹" class="headerlink" title="å¤åˆ¶ User æ¨¡å‹"></a>å¤åˆ¶ User æ¨¡å‹</h4><blockquote>
<p>ç”±äº User æ¨¡å‹åŸºäº AbstractUser æ‰©å±•ï¼Œè€Œ AbstractUser åˆç»§æ‰¿è‡ª AbstractBaseUser å’Œ PermissionsMixinï¼Œæˆ‘ä»¬é€‰æ‹©åœ¨ AbstractUser ç±»ä¸Šè¿›è¡Œé‡å†™ï¼Œå¤åˆ¶å…¶ä»£ç ä»¥å®ç°è‡ªå®šä¹‰ã€‚</p>
</blockquote>
<h4 id="é‡å†™-User-æ¨¡å‹-2"><a href="#é‡å†™-User-æ¨¡å‹-2" class="headerlink" title="é‡å†™ User æ¨¡å‹"></a>é‡å†™ User æ¨¡å‹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">â€‹â€‹<span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> User, AbstractBaseUser, PermissionsMixin, BaseUserManager</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.hashers <span class="keyword">import</span> make_password</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserStatusChoices</span>(models.IntegerChoices):</span><br><span class="line">    <span class="comment"># å·²ç»æ¿€æ´»</span></span><br><span class="line">    ACTIVED = <span class="number">1</span></span><br><span class="line">    <span class="comment"># æ²¡æœ‰æ¿€æ´»</span></span><br><span class="line">    UNACTIVE = <span class="number">2</span></span><br><span class="line">    <span class="comment"># è¢«é”å®š</span></span><br><span class="line">    LOCKED = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OAUserManager</span>(<span class="title class_ inherited__">BaseUserManager</span>):</span><br><span class="line">    use_in_migrations = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯†ç æºè‡ªäºAbstractBaseUserç±»</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_create_user</span>(<span class="params">self, realname, email, password, **extra_fields</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åˆ›å»ºç”¨æˆ·</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> realname:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;å¿…é¡»è®¾ç½®çœŸå®å§“å! &quot;</span>)</span><br><span class="line">        email = <span class="variable language_">self</span>.normalize_email(email)  <span class="comment"># é‚®ç®±æ ‡å‡†åŒ–</span></span><br><span class="line">        user = <span class="variable language_">self</span>.model(realname=realname, email=email, **extra_fields)  <span class="comment"># æ­¤å¤„çš„self.modelå®é™…ä¸Šç­‰äºOAUser</span></span><br><span class="line">        user.password = make_password(password)</span><br><span class="line">        user.save(using=<span class="variable language_">self</span>._db)</span><br><span class="line">        <span class="keyword">return</span> user</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_user</span>(<span class="params">self, realname, email=<span class="literal">None</span>, password=<span class="literal">None</span>, **extra_fields</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åˆ›å»ºæ™®é€šç”¨æˆ·</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        extra_fields.setdefault(<span class="string">&quot;is_staff&quot;</span>, <span class="literal">True</span>)</span><br><span class="line">        extra_fields.setdefault(<span class="string">&quot;is_superuser&quot;</span>, <span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>._create_user(realname, email, password, **extra_fields)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_superuser</span>(<span class="params">self, realname, email=<span class="literal">None</span>, password=<span class="literal">None</span>, **extra_fields</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åˆ›å»ºè¶…çº§ç”¨æˆ·</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        extra_fields.setdefault(<span class="string">&quot;is_staff&quot;</span>, <span class="literal">True</span>)</span><br><span class="line">        extra_fields.setdefault(<span class="string">&quot;is_superuser&quot;</span>, <span class="literal">True</span>)</span><br><span class="line">        extra_fields.setdefault(<span class="string">&quot;status&quot;</span>, UserStatusChoices.ACTIVED)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> extra_fields.get(<span class="string">&quot;is_staff&quot;</span>) <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;è¶…çº§ç”¨æˆ·å¿…é¡»è®¾ç½®is_staff=True.&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> extra_fields.get(<span class="string">&quot;is_superuser&quot;</span>) <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;è¶…çº§ç”¨æˆ·å¿…é¡»è®¾ç½®is_superuser=True.&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>._create_user(realname, email, password, **extra_fields)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OAUser</span>(AbstractBaseUser, PermissionsMixin):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è‡ªå®šä¹‰çš„Useræ¨¡å‹</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    realname = models.CharField(max_length=<span class="number">150</span>, unique=<span class="literal">False</span>)  <span class="comment"># å…¬å¸ä½“é‡åºå¤§,å¯èƒ½ä¼šå‡ºç°åŒåè€…</span></span><br><span class="line">    email = models.EmailField(unique=<span class="literal">True</span>, blank=<span class="literal">False</span>)  <span class="comment"># é‚®ç®±å”¯ä¸€ä¸”ä¸ä¸ºç©º</span></span><br><span class="line">    telephone = models.CharField(max_length=<span class="number">20</span>, blank=<span class="literal">True</span>)</span><br><span class="line">    is_staff = models.BooleanField(default=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># åªè¦å…³æ³¨statuså³å¯,æ— é¡»å…³æ³¨is_active</span></span><br><span class="line">    status = models.IntegerField(choices=UserStatusChoices, default=UserStatusChoices.UNACTIVE)</span><br><span class="line">    is_active = models.BooleanField(default=<span class="literal">True</span>)</span><br><span class="line">    date_joined = models.DateTimeField(auto_now_add=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    objects = OAUserManager()</span><br><span class="line"></span><br><span class="line">    EMAIL_FIELD = <span class="string">&quot;email&quot;</span></span><br><span class="line">    <span class="comment"># USERNAME_FIELD: æ˜¯ç”¨æ¥åšé‰´æƒçš„,ä¼šæŠŠauthenticateçš„usernameå‚æ•°ä¼ ç»™USERNAME_FIELDæŒ‡å®šçš„å­—æ®µ</span></span><br><span class="line">    <span class="comment"># form django.contrib.auth import authenticate</span></span><br><span class="line">    USERNAME_FIELD = <span class="string">&quot;email&quot;</span></span><br><span class="line">    <span class="comment"># REQUIRED_FIELDS: æŒ‡å®šå“ªäº›å­—æ®µæ—¶å¿…é¡»è¦ä¼ çš„,ä½†æ˜¯ä¸èƒ½é‡å¤åŒ…å«USERNAME_FIELDå’ŒEMAIL_FIELDå·²ç»è®¾ç½®è¿‡çš„å€¼</span></span><br><span class="line">    REQUIRED_FIELDS = [<span class="string">&quot;realname&quot;</span>, <span class="string">&quot;password&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().clean()</span><br><span class="line">        <span class="variable language_">self</span>.email = <span class="variable language_">self</span>.__class__.objects.normalize_email(<span class="variable language_">self</span>.email)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_full_name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.realname</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_short_name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.realname</span><br></pre></td></tr></table></figure>

<h4 id="setttings-è¦†ç›–åŸæœ‰-User-æ¨¡å‹"><a href="#setttings-è¦†ç›–åŸæœ‰-User-æ¨¡å‹" class="headerlink" title="setttings è¦†ç›–åŸæœ‰ User æ¨¡å‹"></a>setttings è¦†ç›–åŸæœ‰ User æ¨¡å‹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¦†ç›–djangoè‡ªå¸¦çš„Useræ¨¡å‹</span></span><br><span class="line"><span class="comment"># æ ¼å¼: &#x27;app.&lt;Useræ¨¡å‹å&gt;&#x27;</span></span><br><span class="line">AUTH_USER_MODEL = <span class="string">&quot;oaauth.OAUser&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é”™è¯¯ç¤ºä¾‹:</span></span><br><span class="line"><span class="comment"># AUTH_USER_MODEL = &#x27;apps.oaauth.models.OAUser&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ¨¡å‹æ˜ å°„"><a href="#æ¨¡å‹æ˜ å°„" class="headerlink" title="æ¨¡å‹æ˜ å°„"></a>æ¨¡å‹æ˜ å°„</h2><p>ç»ˆç«¯ä¾æ¬¡è¿è¡Œ:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>

<p>è‹¥æ•°æ®åº“åŒæ­¥æˆåŠŸåˆ™æ˜¾ç¤ºå¦‚ä¸‹:<br><img src="https://s2.loli.net/2024/08/07/Q15LSmAq2NJrkoD.png"></p>
<h2 id="æµ‹è¯•-åˆ›å»ºè¶…çº§ç”¨æˆ·"><a href="#æµ‹è¯•-åˆ›å»ºè¶…çº§ç”¨æˆ·" class="headerlink" title="æµ‹è¯•: åˆ›å»ºè¶…çº§ç”¨æˆ·"></a>æµ‹è¯•: åˆ›å»ºè¶…çº§ç”¨æˆ·</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">(venv) PS D:\yourterminal&gt; python manage.py createsuperuser</span><br><span class="line">Email: dianzanjiaguanzhu@qq.com</span><br><span class="line">Realname: dianzanjiaguanzhu</span><br><span class="line">å¯†ç : <span class="number">123456</span></span><br><span class="line">Superuser created successfully.</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2024/08/07/utorH2XTUEKwgJA.png"></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬èŠ‚è¯¦ç»†ä»‹ç»äº†å¯¹ Django æ¡†æ¶ä¸­ User å¯¹è±¡çš„é‡å†™è¿‡ç¨‹åŠå…¶åº”ç”¨ã€‚</p>
]]></content>
      <categories>
        <category>å‰åç«¯åˆ†ç¦»</category>
      </categories>
      <tags>
        <tag>Django</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Django5+Vue3:OAç³»ç»Ÿå‰åç«¯åˆ†ç¦»é¡¹ç›®å®æˆ˜-é¡¹ç›®åˆå§‹åŒ–(1)</title>
    <url>/2024/08/06/Django5-Vue3-OA%E7%B3%BB%E7%BB%9F%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96-1/</url>
    <content><![CDATA[<h1 id="Django5-Vue3-ç³»åˆ—æ–‡ç« "><a href="#Django5-Vue3-ç³»åˆ—æ–‡ç« " class="headerlink" title="Django5+Vue3 ç³»åˆ—æ–‡ç« "></a>Django5+Vue3 ç³»åˆ—æ–‡ç« </h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote>
<p>æ­¤é¡¹ç›®é‡‡ç”¨ Django æ¡†æ¶çš„ 5.0.7 ç‰ˆæœ¬è¿›è¡Œå¼€å‘ã€‚<br>Django 5.0 æ”¯æŒçš„ Python ç‰ˆæœ¬ä¸º 3.10ã€3.11 å’Œ 3.12ã€‚<br>OA ç³»ç»Ÿç³»åˆ—æ–‡ç« å°†æŒç»­æ›´æ–°ï¼Œç›´è‡³é¡¹ç›®çš„ Docker éƒ¨ç½²é˜¶æ®µã€‚<br>CSDN ä¸“æ é“¾æ¥:Â <a href="http://t.csdnimg.cn/oMuU0">~å¿«æ·ä¼ é€é—¨: ç•™ä¸ªèµå†èµ°å‘— ğŸ˜­! ~</a></p>
</blockquote>
<h2 id="pycharm-åˆå§‹åŒ–-django5-é¡¹ç›®"><a href="#pycharm-åˆå§‹åŒ–-django5-é¡¹ç›®" class="headerlink" title="pycharm åˆå§‹åŒ– django5 é¡¹ç›®"></a>pycharm åˆå§‹åŒ– django5 é¡¹ç›®</h2><p><img src="https://s2.loli.net/2024/08/06/nzbqFCoe5DV2Wit.png" alt="image"></p>
<h2 id="åˆ›å»º-MySQL-æ•°æ®åº“"><a href="#åˆ›å»º-MySQL-æ•°æ®åº“" class="headerlink" title="åˆ›å»º MySQL æ•°æ®åº“"></a>åˆ›å»º MySQL æ•°æ®åº“</h2><h3 id="MySQL-åˆ›å»º-oa-æ•°æ®åº“"><a href="#MySQL-åˆ›å»º-oa-æ•°æ®åº“" class="headerlink" title="MySQL åˆ›å»º oa æ•°æ®åº“"></a>MySQL åˆ›å»º oa æ•°æ®åº“</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE oa <span class="keyword">DEFAULT</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4;</span><br></pre></td></tr></table></figure>

<h3 id="æ›´æ”¹é¡¹ç›®-settings-é…ç½®"><a href="#æ›´æ”¹é¡¹ç›®-settings-é…ç½®" class="headerlink" title="æ›´æ”¹é¡¹ç›® settings é…ç½®"></a>æ›´æ”¹é¡¹ç›® settings é…ç½®</h3><h4 id="é…ç½®æ•°æ®åº“"><a href="#é…ç½®æ•°æ®åº“" class="headerlink" title="é…ç½®æ•°æ®åº“"></a>é…ç½®æ•°æ®åº“</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&quot;default&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;ENGINE&quot;</span>: <span class="string">&quot;django.db.backends.mysql&quot;</span>,</span><br><span class="line">        <span class="string">&quot;NAME&quot;</span>: <span class="string">&quot;oa&quot;</span>,</span><br><span class="line">        <span class="string">&quot;USER&quot;</span>: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">        <span class="string">&quot;PASSWORD&quot;</span>: <span class="string">&quot;&lt;password&gt;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;HOST&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;PORT&quot;</span>: <span class="number">3306</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å®‰è£…-rest-framework"><a href="#å®‰è£…-rest-framework" class="headerlink" title="å®‰è£… rest_framework"></a>å®‰è£… rest_framework</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Application definition</span></span><br><span class="line"></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&quot;django.contrib.admin&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.auth&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.contenttypes&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.sessions&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.messages&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.staticfiles&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®‰è£…rest_framework</span></span><br><span class="line">    <span class="string">&#x27;rest_framework&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="å…³é—­-CSRF-ä¿æŠ¤"><a href="#å…³é—­-CSRF-ä¿æŠ¤" class="headerlink" title="å…³é—­ CSRF ä¿æŠ¤"></a>å…³é—­ CSRF ä¿æŠ¤</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line">    <span class="string">&quot;django.middleware.security.SecurityMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.sessions.middleware.SessionMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.middleware.common.CommonMiddleware&quot;</span>,</span><br><span class="line">    <span class="comment"># å…³é—­CSRFä¿æŠ¤</span></span><br><span class="line">    <span class="comment"># &quot;django.middleware.csrf.CsrfViewMiddleware&quot;,</span></span><br><span class="line">    <span class="string">&quot;django.contrib.auth.middleware.AuthenticationMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.messages.middleware.MessageMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.middleware.clickjacking.XFrameOptionsMiddleware&quot;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œç”±äºæˆ‘ä»¬ä¸å†ä¾èµ– Django æ¨¡æ¿ç³»ç»Ÿï¼Œä¸”æ‰€æœ‰èº«ä»½éªŒè¯æµç¨‹å‡é€šè¿‡ JWT Token å®ç°ï¼Œå› æ­¤ CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰æ”»å‡»çš„å¨èƒå·²è¢«æœ‰æ•ˆç¼“è§£ã€‚é‰´äºæ­¤ï¼Œæˆ‘ä»¬å»ºè®®ç¦ç”¨ Django çš„ CSRF ä¿æŠ¤æœºåˆ¶ã€‚æ­¤ä¸¾ä¸ä»…ç®€åŒ–äº†å‰ç«¯é¡µé¢çš„æ¸²æŸ“æµç¨‹ï¼Œé¿å…äº†é¢‘ç¹è·å– CSRF Token çš„ç¹çæ“ä½œï¼ŒåŒæ—¶ä¹Ÿä¸æˆ‘ä»¬é‡‡ç”¨çš„åŸºäº JWT çš„èº«ä»½éªŒè¯ç­–ç•¥ç›¸å¥‘åˆã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨æœ¬é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ PyCharm å¿«é€Ÿæ­å»ºäº† Django 5 é¡¹ç›®ï¼Œå¹¶æˆåŠŸé…ç½®äº†ç›¸åº”çš„æ•°æ®åº“ã€‚åŒæ—¶ï¼Œå¯¹ settings.py è¿›è¡Œäº†é€‚å½“è°ƒæ•´ï¼Œä»¥ç¡®ä¿é¡¹ç›®é…ç½®çš„ä¼˜åŒ–å’Œé€‚é…ã€‚</p>
]]></content>
      <categories>
        <category>å‰åç«¯åˆ†ç¦»</category>
      </categories>
      <tags>
        <tag>Django</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
</search>
